{"ast":null,"code":"import _toConsumableArray from \"/media/matt/2-Samsung-Files/Documents/School/BCIT/Level_4/6_ISSP/my-repo/backup (copy)/ISSP-Fall-2022/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/media/matt/2-Samsung-Files/Documents/School/BCIT/Level_4/6_ISSP/my-repo/backup (copy)/ISSP-Fall-2022/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/media/matt/2-Samsung-Files/Documents/School/BCIT/Level_4/6_ISSP/my-repo/backup (copy)/ISSP-Fall-2022/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/media/matt/2-Samsung-Files/Documents/School/BCIT/Level_4/6_ISSP/my-repo/backup (copy)/ISSP-Fall-2022/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/media/matt/2-Samsung-Files/Documents/School/BCIT/Level_4/6_ISSP/my-repo/backup (copy)/ISSP-Fall-2022/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/media/matt/2-Samsung-Files/Documents/School/BCIT/Level_4/6_ISSP/my-repo/backup (copy)/ISSP-Fall-2022/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/media/matt/2-Samsung-Files/Documents/School/BCIT/Level_4/6_ISSP/my-repo/backup (copy)/ISSP-Fall-2022/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/media/matt/2-Samsung-Files/Documents/School/BCIT/Level_4/6_ISSP/my-repo/backup (copy)/ISSP-Fall-2022/src/components/NoCollisionLayout.jsx\";\nimport React from \"react\";\nimport _ from \"lodash\";\nimport TimelineGrid from \"./TimelineGrid\";\nimport { Link } from 'react-router-dom';\nimport { ReactSession } from 'react-client-session';\nimport RGL, { WidthProvider } from \"react-grid-layout\";\n\nvar LocalStorageLayout = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(LocalStorageLayout, _React$PureComponent);\n\n  function LocalStorageLayout(_ref) {\n    var _this;\n\n    var props = _ref.props,\n        socket = _ref.socket,\n        heightLimit = _ref.heightLimit,\n        newInstructorArray = _ref.newInstructorArray,\n        weekInformation = _ref.weekInformation,\n        totalWeeks = _ref.totalWeeks,\n        firstWeek = _ref.firstWeek,\n        currentMonthWeeks = _ref.currentMonthWeeks,\n        currentMonth = _ref.currentMonth,\n        year = _ref.year;\n\n    _classCallCheck(this, LocalStorageLayout);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LocalStorageLayout).call(this, props));\n\n    _this.replaceItem = function (item) {\n      for (var i = 0; i < _this.state.layout.length; i++) {\n        if (_this.state.layout[i].i === item.i) {\n          var newLayout = _this.state.layout.slice();\n\n          newLayout[i] = item;\n\n          _this.setState({\n            layout: newLayout\n          });\n\n          break;\n        }\n      }\n    };\n\n    _this.onLayoutChange = function (layout) {\n      _this.setState({\n        layout: layout\n      });\n    };\n\n    _this.onItemChange = function (layout, oldItem, newItem) {\n      // Update the dates on the postgresql database\n      var startDate = findWeekDate(_this.state.weekInformation, newItem.x);\n      var endDate = findWeekDate(_this.state.weekInformation, newItem.w + newItem.x - 1); // HTTP request instead of sockets\n\n      var index = _.findIndex(_this.monthItems, function (element) {\n        return element.data.i.toString() === newItem.i;\n      });\n\n      var foundItem = _this.monthItems[index]; // Restrict movement of the course to one row only\n\n      var yAxisLockedItem = newItem;\n      yAxisLockedItem.y = oldItem.y;\n\n      _this.replaceItem(yAxisLockedItem);\n\n      var instructor = _this.state.instructorArray[Math.floor(newItem.y / 2)];\n\n      _this.socket.emit('itemChanged', yAxisLockedItem, {\n        username: instructor.key,\n        courseNum: foundItem.courseNum,\n        caId: foundItem.caId,\n        start: startDate.getTime(),\n        end: endDate.getTime()\n      });\n    };\n\n    _this.onAddVacation = function (info) {\n      var start = findWeekIndex(_this.state.weekInformation, new Date(info.start_date));\n      var end = findWeekIndex(_this.state.weekInformation, new Date(info.end_date)) + 1;\n\n      var index = _.findIndex(_this.state.instructorArray, function (element) {\n        return element.key === info.username;\n      });\n\n      var newVacation = {\n        text: info.username + \"'s Vacation\",\n        uid: info.username,\n        vid: info.vacation_id,\n        data: {\n          i: info.username + info.vacation_id,\n          x: start,\n          y: index * 2 + 1,\n          w: end - start,\n          h: 1\n        }\n      };\n\n      _this.setState({\n        items: _this.state.items.concat(newVacation)\n      });\n    };\n\n    _this.onAddCourse = function (course) {\n      var x = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var y = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var emit = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n      var w = parseInt(course.weeklength);\n      console.log(x);\n      var startDate = findWeekDate(_this.state.weekInformation, x + _this.props.firstWeek);\n      var endDate = findWeekDate(_this.state.weekInformation, w + x + _this.props.firstWeek);\n\n      var instructor = _this.state.instructorArray[Math.floor(y / 2)];\n\n      var start = findWeekIndex(_this.state.weekInformation, startDate);\n      var end = findWeekIndex(_this.state.weekInformation, endDate); // User/ instructor was deleted, can't create a course\n\n      if (instructor === undefined) {\n        return;\n      }\n\n      if (emit) {\n        _this.socket.emit('courseAdded', _objectSpread({}, course, {\n          x: x,\n          y: y,\n          instructorKey: instructor.key,\n          courseNum: course.number,\n          start: startDate.getTime(),\n          end: endDate.getTime()\n        }));\n      } else {\n        _this.setState({\n          // Add a new item\n          items: _this.state.items.concat({\n            start: start,\n            end: end,\n            text: course.title,\n            userId: instructor.key,\n            courseNum: course.number,\n            caId: course.caId,\n            data: {\n              i: course.caId,\n              x: x,\n              y: y,\n              w: w,\n              h: 1\n            }\n          })\n        });\n      }\n\n      console.log(_this.state.items);\n    };\n\n    _this.onRemoveUser = function (key, y) {\n      var initialLength = _this.state.instructorArray.length;\n\n      _this.setState({\n        instructorArray: _.reject(_this.state.instructorArray, function (element) {\n          return element.key === key;\n        })\n      }, function () {\n        // No user/ instructor found to delete\n        if (_this.state.instructorArray.length !== initialLength) {\n          // Remove elements on the same row\n          console.log(\"Removed items at: \" + y);\n\n          _this.setState({\n            items: _.reject(_this.state.items, function (element) {\n              return element.data.y === y || element.data.y === y + 1;\n            })\n          }, function () {\n            console.log(_this.state.items); // Move course elements up if they are below the user that was deleted\n\n            _this.setState({\n              items: _.reduce(_this.state.items, function (acc, element) {\n                if (element.data.y > y) {\n                  var newElement = element;\n                  newElement.data.y -= 2;\n                  return [].concat(_toConsumableArray(acc), [newElement]);\n                } else {\n                  return [].concat(_toConsumableArray(acc), [element]);\n                }\n              }, [])\n            }, function () {\n              _this.setState({\n                layout: _.reduce(_this.state.items, function (acc, element) {\n                  if (element.vid !== undefined) {\n                    var itemData = _objectSpread({}, element.data, {\n                      isDraggable: false,\n                      isResizable: false\n                    });\n\n                    return [].concat(_toConsumableArray(acc), [itemData]);\n                  } else {\n                    var _itemData = element.data;\n                    return [].concat(_toConsumableArray(acc), [_itemData]);\n                  }\n                }, [])\n              });\n\n              console.log(_this.state.layout);\n            });\n          }); // Reset layout so that the items are shifted up visually\n\n        }\n      });\n    };\n\n    _this.onAddUser = function (user) {\n      _this.setState({\n        instructorArray: [].concat(_toConsumableArray(_this.state.instructorArray), [{\n          key: user.username,\n          name: user.firstname + \" \" + user.lastname,\n          timeblocks: [],\n          vacations: []\n        }])\n      });\n    };\n\n    _this.resize = function () {\n      return _this.forceUpdate();\n    };\n\n    var timeLineInformation = weekInformation.weekRangesArray[currentMonth];\n    _this.state = {\n      // Loop through the instructor array to get all the courses associated with them\n      items: newInstructorArray.reduce(function (acc, element, index) {\n        if (element.timeblocks.length === 0 && element.vacations.length === 0 || weekInformation.length === 0) {\n          return acc;\n        } // Create a course element for every timeblock and concatenate them into one array\n\n\n        var arr = acc.concat(element.timeblocks.map(function (info) {\n          var start = findWeekIndex(weekInformation, info.start);\n          var end = findWeekIndex(weekInformation, info.end);\n          var width = getCourseWidth(start, end, weekInformation, timeLineInformation);\n          return {\n            start: start,\n            end: end,\n            text: info.name,\n            caId: info.caId,\n            userId: info.userId,\n            courseNum: info.courseNum,\n            data: {\n              i: info.caId,\n              x: start,\n              y: index * 2,\n              w: width,\n              h: 1\n            }\n          };\n        }));\n        return arr.concat(element.vacations.map(function (info) {\n          var start = findWeekIndex(weekInformation, info.vacationStart);\n          var end = findWeekIndex(weekInformation, info.vacationEnd) + 1;\n          var width = getCourseWidth(start, end, weekInformation, timeLineInformation);\n          return {\n            start: start,\n            end: end,\n            text: info.userId + \"'s Vacation\",\n            uid: info.userId,\n            vid: info.vacationId,\n            data: {\n              i: info.userId + info.vacationId,\n              x: start,\n              y: index * 2 + 1,\n              w: width,\n              h: 1\n            }\n          };\n        }));\n      }, []),\n      heightLimit: heightLimit.get,\n      weekInformation: weekInformation,\n      instructorArray: newInstructorArray,\n      monthWeeks: currentMonthWeeks\n    };\n    _this.socket = socket;\n    _this.heightLimit = heightLimit;\n    _this.totalWeeks = totalWeeks;\n    _this.mWeeks = currentMonthWeeks;\n    _this.monthItems = _this.state.items.filter(function (info) {\n      var start = info.start;\n      var end = info.end;\n      var width = getCourseWidth(start, end, weekInformation, timeLineInformation);\n\n      if (width === 0) {\n        return false;\n      }\n\n      return true;\n    });\n    _this.itemLayout = [];\n\n    _this.socket.on(\"itemChanged\", function (item) {\n      console.log(\"Item Received: \" + JSON.stringify(item));\n\n      _this.replaceItem(item);\n    });\n\n    _this.socket.on(\"courseAdded\", function (item) {\n      console.log(\"Item Received: \" + JSON.stringify(item));\n      var date = new Date(item.start);\n      var courseYear = date.getFullYear();\n      var adjustment = (courseYear - _this.props.year) * 12;\n      date.setMonth(date.getMonth() - adjustment);\n      item.start = date.getTime();\n\n      _this.onAddCourse(item, parseInt(item.x), parseInt(item.y), false);\n    });\n\n    _this.socket.on(\"courseDeleted\", function (i) {\n      console.log(\"Item Received: \" + JSON.stringify(i));\n\n      _this.onRemoveItem(i, false);\n    });\n\n    _this.socket.on(\"vacationApproved\", function (vacation) {\n      console.log(\"Item Received: \" + JSON.stringify(vacation));\n\n      _this.onAddVacation(vacation);\n    });\n\n    _this.socket.on(\"vacationDeleted\", function (vacation) {\n      console.log(\"Item Received: \" + JSON.stringify(vacation));\n\n      _this.onRemoveVacation(vacation.vacation_id, false);\n    });\n\n    return _this;\n  }\n\n  _createClass(LocalStorageLayout, [{\n    key: \"onRemoveItem\",\n    value: function onRemoveItem(i) {\n      var emit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n      // Find the index of the course element in the state\n      var index = _.findIndex(this.state.items, function (element) {\n        return element.data.i === i;\n      });\n\n      var foundItem = this.state.items[index]; // Emit a message to all other applications that a course has been edeleted\n\n      if (emit) {\n        this.socket.emit(\"courseDeleted\", foundItem, i);\n      } // Remove the element from the state\n\n\n      this.setState({\n        items: _.reject(this.state.items, function (element) {\n          return element.data.i === i;\n        })\n      });\n    }\n  }, {\n    key: \"onRemoveVacation\",\n    value: function onRemoveVacation(vid) {\n      var emit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n      if (emit) {\n        this.socket.emit(\"vacationDeleted\", {\n          vacation_id: vid\n        });\n      } // Remove the element from the state\n\n\n      this.setState({\n        items: _.reject(this.state.items, function (element) {\n          return element.vid === vid;\n        })\n      });\n    }\n  }, {\n    key: \"createElement\",\n    value: function createElement(el) {\n      var isVacation = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var layout = arguments.length > 2 ? arguments[2] : undefined;\n      var removeStyle = {\n        position: \"absolute\",\n        right: \"2px\",\n        top: 0,\n        cursor: \"pointer\",\n        padding: \"5px\",\n        color: \"black\"\n      };\n      var dsStyle = {\n        position: \"absolute\",\n        left: \"2px\",\n        bottom: 0,\n        cursor: \"pointer\",\n        padding: \"5px\",\n        color: \"black\"\n      };\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: el.data.i,\n        \"data-grid\": isVacation ? _objectSpread({}, el.data, {\n          isDraggable: false,\n          isResizable: false\n        }) : el.data,\n        name: el.text + \" el\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 9\n        }\n      }, el.text), ReactSession.get(\"admin\") !== undefined ? /*#__PURE__*/React.createElement(\"span\", {\n        className: \"remove\",\n        style: removeStyle,\n        onClick: isVacation ? this.onRemoveVacation.bind(this, el.vid) : this.onRemoveItem.bind(this, el.data.i),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 13\n        }\n      }, \"x\") : undefined, !isVacation && ReactSession.get(\"admin\") !== undefined ? /*#__PURE__*/React.createElement(Link, {\n        to: {\n          pathname: \"/detailed-schedule\",\n          search: \"?courseNum=\" + el.courseNum\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"remove\",\n        style: dsStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 13\n        }\n      }, \"Detailed\")) : undefined);\n    }\n  }, {\n    key: \"createItemGrid\",\n    value: function createItemGrid(props) {\n      var _this2 = this;\n\n      var ReactGridLayout = WidthProvider(RGL);\n      this.updateItems();\n      return /*#__PURE__*/React.createElement(ReactGridLayout, Object.assign({}, props, {\n        cols: this.props.currentMonthWeeks,\n        maxRows: this.state.heightLimit(),\n        layout: this.state.layout,\n        isDraggable: ReactSession.get(\"admin\") !== undefined ? true : false,\n        isResizable: ReactSession.get(\"admin\") !== undefined ? true : false,\n        autoSize: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 7\n        }\n      }), this.monthItems.map(function (el) {\n        return _this2.createElement(el, el.vid !== undefined ? true : false, _this2.props.currentMonthWeeks);\n      }));\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (this.props.weekInformation.weekRangesArray[this.props.currentMonth].month !== prevProps.weekInformation.weekRangesArray[this.props.currentMonth].month) {\n        this.onLayoutChange(this.itemLayout);\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      window.addEventListener('resize', this.resize);\n    }\n  }, {\n    key: \"updateItems\",\n    value: function updateItems() {\n      var _this3 = this;\n\n      var items = [];\n      var random = this.state.items.filter(function (item) {\n        var start = item.start;\n        var end = item.end;\n        var width = getCourseWidth(start, end, _this3.props.weekInformation, _this3.props.weekInformation.weekRangesArray[_this3.props.currentMonth]);\n\n        if (width === 0) {\n          return false;\n        }\n\n        return true;\n      });\n      random.forEach(function (element) {\n        var width = getCourseWidth(element.start, element.end, _this3.props.weekInformation, _this3.props.weekInformation.weekRangesArray[_this3.props.currentMonth]);\n        element.data.w = width;\n        element.data.i = element.data.i.toString();\n        element.data.maxW = _this3.props.currentMonthWeeks;\n        items.push(element.data);\n      });\n      this.monthItems = random;\n      this.itemLayout = items;\n      return items;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(TimelineGrid, {\n        socket: this.socket,\n        heightLimit: this.heightLimit,\n        instructorArray: this.state.instructorArray,\n        createCourse: this.onAddCourse,\n        totalWeeks: this.props.currentMonthWeeks,\n        onRemoveUser: this.onRemoveUser,\n        onAddUser: this.onAddUser,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"grid-item-container\",\n        style: {\n          width: this.props.currentMonthWeeks * 102,\n          position: \"absolute\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 453,\n          columnNumber: 9\n        }\n      }, this.createItemGrid(this.props)));\n    }\n  }]);\n\n  return LocalStorageLayout;\n}(React.PureComponent);\n\nLocalStorageLayout.defaultProps = {\n  className: \"layout\",\n  rowHeight: 100,\n  margin: [2, 2],\n  allowOverlap: true,\n  preventCollision: false,\n  resizeHandles: ['e'],\n  compactType: null,\n  autoSize: true\n};\nexport { LocalStorageLayout as default };\n\nfunction getCourseWidth(start, end, weekInformation, timeLineInformation) {\n  var monthStart = findWeekIndex(weekInformation, timeLineInformation.times[0].date);\n  var monthEnd = findWeekIndex(weekInformation, timeLineInformation.times[timeLineInformation.times.length - 1].date);\n\n  var course = _.range(start, end);\n\n  var month = _.range(monthStart, monthEnd + 1);\n\n  var intersection = course.filter(function (value) {\n    return month.includes(value);\n  });\n  return intersection.length;\n}\n\nfunction findWeekIndex(weekInformation, date) {\n  // Search for a week in a particular month\n  var monthIndex = date.getMonth(); // Get the first day of every week in that month\n\n  var weekRanges = weekInformation.weekRangesArray[monthIndex].times;\n\n  for (var i = 0; i < weekRanges.length; i++) {\n    if (date <= weekRanges[i].date) {\n      return weekRanges[i].index;\n    }\n  } // Return the index of the last week of the month\n\n\n  return weekRanges[weekRanges.length - 1].index;\n}\n\nfunction findWeekDate(weekInformation, index) {\n  return weekInformation.indexMap[index];\n}","map":{"version":3,"names":["React","_","TimelineGrid","Link","ReactSession","RGL","WidthProvider","LocalStorageLayout","props","socket","heightLimit","newInstructorArray","weekInformation","totalWeeks","firstWeek","currentMonthWeeks","currentMonth","year","replaceItem","item","i","state","layout","length","newLayout","slice","setState","onLayoutChange","onItemChange","oldItem","newItem","startDate","findWeekDate","x","endDate","w","index","findIndex","monthItems","element","data","toString","foundItem","yAxisLockedItem","y","instructor","instructorArray","Math","floor","emit","username","key","courseNum","caId","start","getTime","end","onAddVacation","info","findWeekIndex","Date","start_date","end_date","newVacation","text","uid","vid","vacation_id","h","items","concat","onAddCourse","course","parseInt","weeklength","console","log","undefined","instructorKey","number","title","userId","onRemoveUser","initialLength","reject","reduce","acc","newElement","itemData","isDraggable","isResizable","onAddUser","user","name","firstname","lastname","timeblocks","vacations","resize","forceUpdate","timeLineInformation","weekRangesArray","arr","map","width","getCourseWidth","vacationStart","vacationEnd","vacationId","get","monthWeeks","mWeeks","filter","itemLayout","on","JSON","stringify","date","courseYear","getFullYear","adjustment","setMonth","getMonth","onRemoveItem","vacation","onRemoveVacation","el","isVacation","removeStyle","position","right","top","cursor","padding","color","dsStyle","left","bottom","bind","pathname","search","ReactGridLayout","updateItems","createElement","prevProps","prevState","month","window","addEventListener","random","forEach","maxW","push","createItemGrid","PureComponent","defaultProps","className","rowHeight","margin","allowOverlap","preventCollision","resizeHandles","compactType","autoSize","monthStart","times","monthEnd","range","intersection","value","includes","monthIndex","weekRanges","indexMap"],"sources":["/media/matt/2-Samsung-Files/Documents/School/BCIT/Level_4/6_ISSP/my-repo/backup (copy)/ISSP-Fall-2022/src/components/NoCollisionLayout.jsx"],"sourcesContent":["import React from \"react\";\nimport _ from \"lodash\";\nimport TimelineGrid from \"./TimelineGrid\";\nimport { Link } from 'react-router-dom';\nimport { ReactSession } from 'react-client-session';\nimport RGL, { WidthProvider } from \"react-grid-layout\";\n\nexport default class LocalStorageLayout extends React.PureComponent {\n  static defaultProps = {\n    className: \"layout\",\n    rowHeight: 100,\n    margin: [2, 2],\n    allowOverlap: true,\n    preventCollision: false,\n    resizeHandles: ['e'],\n    compactType: null,\n    autoSize: true,\n  };\n\n  constructor({ props, socket, heightLimit, newInstructorArray, weekInformation,\n    totalWeeks, firstWeek, currentMonthWeeks, currentMonth, year }) {\n    super(props);\n\n    let timeLineInformation = weekInformation.weekRangesArray[currentMonth];\n\n    this.state = {\n      // Loop through the instructor array to get all the courses associated with them\n      items: newInstructorArray.reduce(function (acc, element, index) {\n        if ((element.timeblocks.length === 0 && element.vacations.length === 0) || weekInformation.length === 0) {\n          return acc;\n        }\n\n        // Create a course element for every timeblock and concatenate them into one array\n        let arr = acc.concat(\n          element.timeblocks.map((info) => {\n            const start = findWeekIndex(weekInformation, info.start);\n            const end = findWeekIndex(weekInformation, info.end);\n\n            const width = getCourseWidth(start, end, weekInformation, timeLineInformation);\n\n            return (\n              {\n                start: start,\n                end: end,\n                text: info.name,\n                caId: info.caId,\n                userId: info.userId,\n                courseNum: info.courseNum,\n                data: {\n                  i: info.caId,\n                  x: start,\n                  y: index * 2,\n                  w: width,\n                  h: 1,\n                }\n              }\n            )\n          })\n        );\n\n        return arr.concat(\n          element.vacations.map((info) => {\n            const start = findWeekIndex(weekInformation, info.vacationStart);\n            const end = findWeekIndex(weekInformation, info.vacationEnd) + 1;\n\n            const width = getCourseWidth(start, end, weekInformation, timeLineInformation);\n            return (\n              {\n                start: start,\n                end: end,\n                text: info.userId + \"'s Vacation\",\n                uid: info.userId,\n                vid: info.vacationId,\n                data: {\n                  i: info.userId + info.vacationId,\n                  x: start,\n                  y: (index * 2) + 1,\n                  w: width,\n                  h: 1,\n                }\n              }\n            )\n          })\n        );\n      }, []),\n      heightLimit: heightLimit.get,\n      weekInformation: weekInformation,\n      instructorArray: newInstructorArray,\n      monthWeeks: currentMonthWeeks,\n    };\n\n    this.socket = socket;\n    this.heightLimit = heightLimit;\n    this.totalWeeks = totalWeeks;\n    this.mWeeks = currentMonthWeeks;\n    this.monthItems = this.state.items.filter((info) => {\n      const start = info.start;\n      const end = info.end;\n      const width = getCourseWidth(start, end, weekInformation, timeLineInformation);\n\n      if (width === 0) {\n        return false;\n      }\n\n      return true;\n    });\n    this.itemLayout = [];\n\n    this.socket.on(\"itemChanged\", (item) => {\n      console.log(\"Item Received: \" + JSON.stringify(item));\n\n      this.replaceItem(item);\n    });\n\n    this.socket.on(\"courseAdded\", (item) => {\n      console.log(\"Item Received: \" + JSON.stringify(item));\n\n      var date = new Date(item.start);\n\n      var courseYear = date.getFullYear();\n\n      var adjustment = (courseYear - this.props.year) * 12;\n\n      date.setMonth(date.getMonth() - adjustment);\n\n      item.start = date.getTime();\n\n      this.onAddCourse(item, parseInt(item.x), parseInt(item.y), false);\n    });\n\n    this.socket.on(\"courseDeleted\", (i) => {\n      console.log(\"Item Received: \" + JSON.stringify(i));\n\n      this.onRemoveItem(i, false);\n    });\n\n    this.socket.on(\"vacationApproved\", (vacation) => {\n      console.log(\"Item Received: \" + JSON.stringify(vacation));\n\n      this.onAddVacation(vacation);\n    });\n\n    this.socket.on(\"vacationDeleted\", (vacation) => {\n      console.log(\"Item Received: \" + JSON.stringify(vacation));\n\n      this.onRemoveVacation(vacation.vacation_id, false);\n    });\n  }\n\n  replaceItem = (item) => {\n    for (let i = 0; i < this.state.layout.length; i++) {\n      if (this.state.layout[i].i === item.i) {\n        const newLayout = this.state.layout.slice();\n        newLayout[i] = item;\n\n        this.setState({\n          layout: newLayout\n        });\n\n        break;\n      }\n    }\n  }\n\n  onLayoutChange = (layout) => {\n    this.setState({\n      layout: layout\n    });\n  }\n\n  onItemChange = (layout, oldItem, newItem) => {\n    // Update the dates on the postgresql database\n    const startDate = findWeekDate(this.state.weekInformation, newItem.x);\n    const endDate = findWeekDate(this.state.weekInformation, newItem.w + newItem.x - 1);\n\n    // HTTP request instead of sockets\n    const index = _.findIndex(this.monthItems, (element) => { return element.data.i.toString() === newItem.i });\n    const foundItem = this.monthItems[index];\n\n    // Restrict movement of the course to one row only\n    const yAxisLockedItem = newItem;\n    yAxisLockedItem.y = oldItem.y;\n    this.replaceItem(yAxisLockedItem);\n\n    const instructor = this.state.instructorArray[Math.floor(newItem.y / 2)];\n    this.socket.emit('itemChanged', yAxisLockedItem, { username: instructor.key, courseNum: foundItem.courseNum, caId: foundItem.caId, start: startDate.getTime(), end: endDate.getTime() });\n  }\n\n  onAddVacation = (info) => {\n    const start = findWeekIndex(this.state.weekInformation, new Date(info.start_date));\n    const end = findWeekIndex(this.state.weekInformation, new Date(info.end_date)) + 1;\n    const index = _.findIndex(this.state.instructorArray, (element) => { return element.key === info.username });\n\n    const newVacation = {\n      text: info.username + \"'s Vacation\",\n      uid: info.username,\n      vid: info.vacation_id,\n      data: {\n        i: info.username + info.vacation_id,\n        x: start,\n        y: (index * 2) + 1,\n        w: end - start,\n        h: 1,\n      }\n    }\n\n    this.setState({\n      items: this.state.items.concat(\n        newVacation\n      )\n    });\n  }\n\n  onAddCourse = (course, x = 0, y = 0, emit = true) => {\n    const w = parseInt(course.weeklength);\n\n    console.log(x);\n\n    const startDate = findWeekDate(this.state.weekInformation, x + this.props.firstWeek);\n    const endDate = findWeekDate(this.state.weekInformation, w + x + this.props.firstWeek);\n    const instructor = this.state.instructorArray[Math.floor(y / 2)];\n\n    const start = findWeekIndex(this.state.weekInformation, startDate);\n    const end = findWeekIndex(this.state.weekInformation, endDate);\n\n    // User/ instructor was deleted, can't create a course\n    if (instructor === undefined) {\n      return;\n    }\n\n    if (emit) {\n      this.socket.emit('courseAdded', { ...course, x: x, y: y, instructorKey: instructor.key, courseNum: course.number, start: startDate.getTime(), end: endDate.getTime() });\n    } else {\n      this.setState({\n        // Add a new item\n        items: this.state.items.concat({\n          start: start,\n          end: end,\n          text: course.title,\n          userId: instructor.key,\n          courseNum: course.number,\n          caId: course.caId,\n          data: {\n            i: course.caId,\n            x: x,\n            y: y,\n            w: w,\n            h: 1,\n          }\n        }),\n      });\n    }\n    console.log(this.state.items);\n  }\n\n  onRemoveItem(i, emit = true) {\n    // Find the index of the course element in the state\n    const index = _.findIndex(this.state.items, (element) => { return element.data.i === i });\n    const foundItem = this.state.items[index];\n\n    // Emit a message to all other applications that a course has been edeleted\n    if (emit) {\n      this.socket.emit(\"courseDeleted\", foundItem, i);\n    }\n\n    // Remove the element from the state\n    this.setState({ items: _.reject(this.state.items, (element) => { return element.data.i === i }) });\n  }\n\n  onRemoveVacation(vid, emit = true) {\n    if (emit) {\n      this.socket.emit(\"vacationDeleted\", { vacation_id: vid });\n    }\n\n    // Remove the element from the state\n    this.setState({ items: _.reject(this.state.items, (element) => { return element.vid === vid }) });\n  }\n\n  onRemoveUser = (key, y) => {\n    const initialLength = this.state.instructorArray.length;\n    this.setState({ instructorArray: _.reject(this.state.instructorArray, (element) => { return element.key === key }) },\n      () => {\n        // No user/ instructor found to delete\n        if (this.state.instructorArray.length !== initialLength) {\n          // Remove elements on the same row\n          console.log(\"Removed items at: \" + y);\n          this.setState({ items: _.reject(this.state.items, (element) => { return element.data.y === y || element.data.y === y + 1 }) }\n            , () => {\n              console.log(this.state.items);\n              // Move course elements up if they are below the user that was deleted\n              this.setState({\n                items: _.reduce(this.state.items, (acc, element) => {\n                  if (element.data.y > y) {\n                    const newElement = element;\n                    newElement.data.y -= 2;\n                    return [...acc, newElement];\n                  } else {\n                    return [...acc, element];\n                  }\n                }, [])\n              },\n                () => {\n                  this.setState({\n                    layout: _.reduce(this.state.items, (acc, element) => {\n                      if (element.vid !== undefined) {\n                        const itemData = { ...element.data, isDraggable: false, isResizable: false };\n                        return [...acc, itemData];\n                      } else {\n                        const itemData = element.data;\n                        return [...acc, itemData];\n                      }\n                    }, [])\n                  });\n                  console.log(this.state.layout);\n                });\n            });\n          // Reset layout so that the items are shifted up visually\n        }\n      });\n  }\n\n  onAddUser = (user) => {\n    this.setState({ instructorArray: [...this.state.instructorArray, { key: user.username, name: user.firstname + \" \" + user.lastname, timeblocks: [], vacations: [] }] });\n  }\n\n  createElement(el, isVacation = false, layout) {\n    const removeStyle = {\n      position: \"absolute\",\n      right: \"2px\",\n      top: 0,\n      cursor: \"pointer\",\n      padding: \"5px\",\n      color: \"black\"\n    };\n    const dsStyle = {\n      position: \"absolute\",\n      left: \"2px\",\n      bottom: 0,\n      cursor: \"pointer\",\n      padding: \"5px\",\n      color: \"black\"\n    };\n    return (\n      <div key={el.data.i} data-grid={isVacation ? { ...el.data, isDraggable: false, isResizable: false } : el.data}\n        name={el.text + \" el\"}>\n        <span className=\"text\">{el.text}</span>\n        {\n          ReactSession.get(\"admin\") !== undefined ?\n            <span\n              className=\"remove\"\n              style={removeStyle}\n              onClick={isVacation ? this.onRemoveVacation.bind(this, el.vid) : this.onRemoveItem.bind(this, el.data.i)}\n            >\n              x\n            </span>\n            :\n            undefined\n        }\n        {!isVacation && ReactSession.get(\"admin\") !== undefined ?\n          <Link\n            to={{\n              pathname: \"/detailed-schedule\",\n              search: \"?courseNum=\" + el.courseNum,\n            }}\n          >\n            <span\n              className=\"remove\"\n              style={dsStyle}\n            >\n              Detailed\n            </span>\n          </Link>\n          :\n          undefined\n        }\n      </div>\n    );\n  }\n\n  createItemGrid(props) {\n\n    const ReactGridLayout = WidthProvider(RGL);\n\n    this.updateItems();\n    return (\n      <ReactGridLayout\n        {...props}\n        cols={this.props.currentMonthWeeks}\n        maxRows={this.state.heightLimit()}\n        layout={this.state.layout}\n        isDraggable={ReactSession.get(\"admin\") !== undefined ? true : false}\n        isResizable={ReactSession.get(\"admin\") !== undefined ? true : false}\n        autoSize={true}\n      >\n        {this.monthItems.map(el => this.createElement(el, el.vid !== undefined ? true : false, this.props.currentMonthWeeks))}\n      </ReactGridLayout>\n    )\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props.weekInformation.weekRangesArray[this.props.currentMonth].month !== prevProps.weekInformation.weekRangesArray[this.props.currentMonth].month) {\n      this.onLayoutChange(this.itemLayout);\n    }\n  }\n\n\n  resize = () => this.forceUpdate();\n\n  componentDidMount() {\n    window.addEventListener('resize', this.resize);\n  }\n\n  updateItems() {\n\n    var items = [];\n\n    var random = this.state.items.filter((item) => {\n      const start = item.start;\n      const end = item.end;\n\n      const width = getCourseWidth(start, end, this.props.weekInformation, this.props.weekInformation.weekRangesArray[this.props.currentMonth]);\n      if (width === 0) {\n        return false;\n      }\n\n      return true;\n    })\n\n    random.forEach(element => {\n      const width = getCourseWidth(element.start, element.end, this.props.weekInformation, this.props.weekInformation.weekRangesArray[this.props.currentMonth]);\n      element.data.w = width;\n      element.data.i = element.data.i.toString();\n      element.data.maxW = this.props.currentMonthWeeks;\n      items.push(element.data);\n    });\n    this.monthItems = random;\n    this.itemLayout = items;\n\n    return items;\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <TimelineGrid\n          socket={this.socket}\n          heightLimit={this.heightLimit}\n          instructorArray={this.state.instructorArray}\n          createCourse={this.onAddCourse}\n          totalWeeks={this.props.currentMonthWeeks}\n          onRemoveUser={this.onRemoveUser}\n          onAddUser={this.onAddUser} />\n        <div className=\"grid-item-container\" style={{ width: this.props.currentMonthWeeks * 102, position: \"absolute\" }}>\n          {this.createItemGrid(this.props)}\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nfunction getCourseWidth(start, end, weekInformation, timeLineInformation) {\n  const monthStart = findWeekIndex(weekInformation, timeLineInformation.times[0].date);\n  const monthEnd = findWeekIndex(weekInformation, timeLineInformation.times[timeLineInformation.times.length - 1].date);\n\n  const course = _.range(start, end);\n  const month = _.range(monthStart, monthEnd + 1);\n\n  const intersection = course.filter(value => month.includes(value));\n\n  return intersection.length;\n\n}\n\nfunction findWeekIndex(weekInformation, date) {\n  // Search for a week in a particular month\n  const monthIndex = date.getMonth();\n\n  // Get the first day of every week in that month\n  const weekRanges = weekInformation.weekRangesArray[monthIndex].times;\n\n  for (let i = 0; i < weekRanges.length; i++) {\n    if (date <= weekRanges[i].date) {\n      return weekRanges[i].index;\n    }\n\n  }\n\n  // Return the index of the last week of the month\n  return weekRanges[weekRanges.length - 1].index;\n}\n\nfunction findWeekDate(weekInformation, index) {\n  return weekInformation.indexMap[index];\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}