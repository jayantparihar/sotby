{"ast":null,"code":"import _toConsumableArray from \"/media/matt/2-Samsung-Files/Documents/School/BCIT/Level_4/6_ISSP/my-repo/backup (copy)/ISSP-Fall-2022/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/media/matt/2-Samsung-Files/Documents/School/BCIT/Level_4/6_ISSP/my-repo/backup (copy)/ISSP-Fall-2022/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/media/matt/2-Samsung-Files/Documents/School/BCIT/Level_4/6_ISSP/my-repo/backup (copy)/ISSP-Fall-2022/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/media/matt/2-Samsung-Files/Documents/School/BCIT/Level_4/6_ISSP/my-repo/backup (copy)/ISSP-Fall-2022/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/media/matt/2-Samsung-Files/Documents/School/BCIT/Level_4/6_ISSP/my-repo/backup (copy)/ISSP-Fall-2022/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/media/matt/2-Samsung-Files/Documents/School/BCIT/Level_4/6_ISSP/my-repo/backup (copy)/ISSP-Fall-2022/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/media/matt/2-Samsung-Files/Documents/School/BCIT/Level_4/6_ISSP/my-repo/backup (copy)/ISSP-Fall-2022/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/media/matt/2-Samsung-Files/Documents/School/BCIT/Level_4/6_ISSP/my-repo/backup (copy)/ISSP-Fall-2022/src/components/NoCollision_Year.jsx\";\nimport React from \"react\";\nimport RGL, { WidthProvider } from \"react-grid-layout\";\nimport _ from \"lodash\";\nimport TimelineGrid from \"./TimelineGrid\";\nimport { Link } from 'react-router-dom';\nimport { ReactSession } from 'react-client-session';\nvar ReactGridLayout = WidthProvider(RGL);\n\nvar LocalStorageLayout = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(LocalStorageLayout, _React$PureComponent);\n\n  function LocalStorageLayout(_ref) {\n    var _this;\n\n    var props = _ref.props,\n        socket = _ref.socket,\n        heightLimit = _ref.heightLimit,\n        newInstructorArray = _ref.newInstructorArray,\n        weekInformation = _ref.weekInformation,\n        totalWeeks = _ref.totalWeeks;\n\n    _classCallCheck(this, LocalStorageLayout);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LocalStorageLayout).call(this, props));\n\n    _this.replaceItem = function (item) {\n      for (var i = 0; i < _this.state.layout.length; i++) {\n        if (_this.state.layout[i].i === item.i) {\n          var newLayout = _this.state.layout.slice();\n\n          newLayout[i] = item;\n\n          _this.setState({\n            layout: newLayout\n          });\n\n          break;\n        }\n      }\n    };\n\n    _this.onLayoutChange = function (layout, layouts) {\n      _this.setState({\n        layout: layout\n      });\n    };\n\n    _this.onItemChange = function (layout, oldItem, newItem) {\n      // Update the dates on the postgresql database\n      var startDate = findWeekDate(_this.state.weekInformation, newItem.x);\n      var endDate = findWeekDate(_this.state.weekInformation, newItem.w + newItem.x - 1); // HTTP request instead of sockets\n\n      var index = _.findIndex(_this.state.items, function (element) {\n        return element.data.i.toString() === newItem.i;\n      });\n\n      var foundItem = _this.state.items[index]; // Restrict movement of the course to one row only\n\n      var yAxisLockedItem = newItem;\n      yAxisLockedItem.y = oldItem.y;\n\n      _this.replaceItem(yAxisLockedItem);\n\n      var instructor = _this.state.instructorArray[Math.floor(newItem.y / 2)];\n\n      _this.socket.emit('itemChanged', yAxisLockedItem, {\n        username: instructor.key,\n        courseNum: foundItem.courseNum,\n        caId: foundItem.caId,\n        start: startDate.getTime(),\n        end: endDate.getTime()\n      });\n    };\n\n    _this.onAddVacation = function (info) {\n      var start = findWeekIndex(_this.state.weekInformation, new Date(info.start_date));\n      var end = findWeekIndex(_this.state.weekInformation, new Date(info.end_date)) + 1;\n\n      var index = _.findIndex(_this.state.instructorArray, function (element) {\n        return element.key === info.username;\n      });\n\n      var newVacation = {\n        text: info.username + \"'s Vacation\",\n        uid: info.username,\n        vid: info.vacation_id,\n        data: {\n          i: info.username + info.vacation_id,\n          x: start,\n          y: index * 2 + 1,\n          w: end - start,\n          h: 1\n        }\n      };\n\n      _this.setState({\n        items: _this.state.items.concat(newVacation)\n      });\n    };\n\n    _this.onAddCourse = function (course) {\n      var x = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var y = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var emit = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n      var w = parseInt(course.weeklength);\n      var startDate = findWeekDate(_this.state.weekInformation, x);\n      var endDate = findWeekDate(_this.state.weekInformation, w + x - 1);\n\n      var instructor = _this.state.instructorArray[Math.floor(y / 2)]; // User/ instructor was deleted, can't create a course\n\n\n      if (instructor === undefined) {\n        return;\n      }\n\n      if (emit) {\n        _this.socket.emit('courseAdded', _objectSpread({}, course, {\n          x: x,\n          y: y,\n          instructorKey: instructor.key,\n          courseNum: course.number,\n          start: startDate.getTime(),\n          end: endDate.getTime()\n        }));\n      } else {\n        _this.setState({\n          // Add a new item\n          items: _this.state.items.concat({\n            text: course.title,\n            userId: instructor.key,\n            courseNum: course.number,\n            caId: course.caId,\n            data: {\n              i: course.caId,\n              x: x,\n              y: y,\n              w: w,\n              h: 1\n            }\n          })\n        });\n      }\n    };\n\n    _this.onRemoveUser = function (key, y) {\n      var initialLength = _this.state.instructorArray.length;\n\n      _this.setState({\n        instructorArray: _.reject(_this.state.instructorArray, function (element) {\n          return element.key === key;\n        })\n      }, function () {\n        // No user/ instructor found to delete\n        if (_this.state.instructorArray.length !== initialLength) {\n          // Remove elements on the same row\n          console.log(\"Removed items at: \" + y);\n\n          _this.setState({\n            items: _.reject(_this.state.items, function (element) {\n              return element.data.y === y || element.data.y === y + 1;\n            })\n          }, function () {\n            console.log(_this.state.items); // Move course elements up if they are below the user that was deleted\n\n            _this.setState({\n              items: _.reduce(_this.state.items, function (acc, element) {\n                if (element.data.y > y) {\n                  var newElement = element;\n                  newElement.data.y -= 2;\n                  return [].concat(_toConsumableArray(acc), [newElement]);\n                } else {\n                  return [].concat(_toConsumableArray(acc), [element]);\n                }\n              }, [])\n            }, function () {\n              _this.setState({\n                layout: _.reduce(_this.state.items, function (acc, element) {\n                  if (element.vid !== undefined) {\n                    var itemData = _objectSpread({}, element.data, {\n                      isDraggable: false,\n                      isResizable: false\n                    });\n\n                    return [].concat(_toConsumableArray(acc), [itemData]);\n                  } else {\n                    var _itemData = element.data;\n                    return [].concat(_toConsumableArray(acc), [_itemData]);\n                  }\n                }, [])\n              });\n\n              console.log(_this.state.layout);\n            });\n          }); // Reset layout so that the items are shifted up visually\n\n        }\n      });\n    };\n\n    _this.onAddUser = function (user) {\n      _this.setState({\n        instructorArray: [].concat(_toConsumableArray(_this.state.instructorArray), [{\n          key: user.username,\n          name: user.firstname + \" \" + user.lastname,\n          timeblocks: [],\n          vacations: []\n        }])\n      });\n    };\n\n    _this.state = {\n      // Loop through the instructor array to get all the courses associated with them\n      items: newInstructorArray.reduce(function (acc, element, index) {\n        if (element.timeblocks.length === 0 && element.vacations.length === 0 || weekInformation.length === 0) {\n          return acc;\n        } // Create a course element for every timeblock and concatenate them into one array\n\n\n        var arr = acc.concat(element.timeblocks.map(function (info) {\n          var start = findWeekIndex(weekInformation, info.start);\n          var end = findWeekIndex(weekInformation, info.end) + 1;\n          return {\n            text: info.name,\n            caId: info.caId,\n            userId: info.userId,\n            courseNum: info.courseNum,\n            data: {\n              i: info.caId,\n              x: start,\n              y: index * 2,\n              w: end - start,\n              h: 1\n            }\n          };\n        }));\n        return arr.concat(element.vacations.map(function (info) {\n          var start = findWeekIndex(weekInformation, info.vacationStart);\n          var end = findWeekIndex(weekInformation, info.vacationEnd) + 1;\n          return {\n            text: info.userId + \"'s Vacation\",\n            uid: info.userId,\n            vid: info.vacationId,\n            data: {\n              i: info.userId + info.vacationId,\n              x: start,\n              y: index * 2 + 1,\n              w: end - start,\n              h: 1\n            }\n          };\n        }));\n      }, []),\n      heightLimit: heightLimit.get,\n      weekInformation: weekInformation,\n      instructorArray: newInstructorArray\n    };\n    _this.socket = socket;\n    _this.heightLimit = heightLimit;\n    _this.totalWeeks = totalWeeks;\n\n    _this.socket.on(\"itemChanged\", function (item) {\n      console.log(\"Item Received: \" + JSON.stringify(item));\n\n      _this.replaceItem(item);\n    });\n\n    _this.socket.on(\"courseAdded\", function (item) {\n      console.log(\"Item Received: \" + JSON.stringify(item));\n\n      _this.onAddCourse(item, parseInt(item.x), parseInt(item.y), false);\n    });\n\n    _this.socket.on(\"courseDeleted\", function (i) {\n      console.log(\"Item Received: \" + JSON.stringify(i));\n\n      _this.onRemoveItem(i, false);\n    });\n\n    _this.socket.on(\"vacationApproved\", function (vacation) {\n      console.log(\"Item Received: \" + JSON.stringify(vacation));\n\n      _this.onAddVacation(vacation);\n    });\n\n    _this.socket.on(\"vacationDeleted\", function (vacation) {\n      console.log(\"Item Received: \" + JSON.stringify(vacation));\n\n      _this.onRemoveVacation(vacation.vacation_id, false);\n    });\n\n    return _this;\n  }\n\n  _createClass(LocalStorageLayout, [{\n    key: \"onRemoveItem\",\n    value: function onRemoveItem(i) {\n      var emit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n      // Find the index of the course element in the state\n      var index = _.findIndex(this.state.items, function (element) {\n        return element.data.i === i;\n      });\n\n      var foundItem = this.state.items[index]; // Emit a message to all other applications that a course has been edeleted\n\n      if (emit) {\n        this.socket.emit(\"courseDeleted\", foundItem, i);\n      } // Remove the element from the state\n\n\n      this.setState({\n        items: _.reject(this.state.items, function (element) {\n          return element.data.i === i;\n        })\n      });\n    }\n  }, {\n    key: \"onRemoveVacation\",\n    value: function onRemoveVacation(vid) {\n      var emit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n      if (emit) {\n        this.socket.emit(\"vacationDeleted\", {\n          vacation_id: vid\n        });\n      } // Remove the element from the state\n\n\n      this.setState({\n        items: _.reject(this.state.items, function (element) {\n          return element.vid === vid;\n        })\n      });\n    }\n  }, {\n    key: \"createElement\",\n    value: function createElement(el) {\n      var isVacation = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var removeStyle = {\n        position: \"absolute\",\n        right: \"2px\",\n        top: 0,\n        cursor: \"pointer\",\n        padding: \"5px\",\n        color: \"black\"\n      };\n      var dsStyle = {\n        position: \"absolute\",\n        left: \"2px\",\n        bottom: 0,\n        cursor: \"pointer\",\n        padding: \"5px\",\n        color: \"black\"\n      };\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: el.data.i,\n        \"data-grid\": isVacation ? _objectSpread({}, el.data, {\n          isDraggable: false,\n          isResizable: false\n        }) : el.data,\n        name: el.text + \" el\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 9\n        }\n      }, el.text), ReactSession.get(\"admin\") !== undefined ? /*#__PURE__*/React.createElement(\"span\", {\n        className: \"remove\",\n        style: removeStyle,\n        onClick: isVacation ? this.onRemoveVacation.bind(this, el.vid) : this.onRemoveItem.bind(this, el.data.i),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 13\n        }\n      }, \"x\") : undefined, !isVacation && ReactSession.get(\"admin\") !== undefined ? /*#__PURE__*/React.createElement(Link, {\n        to: {\n          pathname: \"/detailed-schedule\",\n          search: \"?courseNum=\" + el.courseNum\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"remove\",\n        style: dsStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 13\n        }\n      }, \"Detailed\")) : undefined);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      console.log(this.props.weekInformation);\n      console.log(this.state.items);\n      console.log(this.totalWeeks);\n      return /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(TimelineGrid, {\n        socket: this.socket,\n        heightLimit: this.heightLimit,\n        instructorArray: this.state.instructorArray,\n        createCourse: this.onAddCourse,\n        totalWeeks: this.totalWeeks,\n        onRemoveUser: this.onRemoveUser,\n        onAddUser: this.onAddUser,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"grid-item-container\",\n        style: {\n          width: this.totalWeeks * 102,\n          position: \"absolute\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(ReactGridLayout, Object.assign({}, this.props, {\n        cols: this.totalWeeks,\n        maxRows: this.state.heightLimit(),\n        layout: this.state.layout,\n        onLayoutChange: this.onLayoutChange,\n        onResizeStop: this.onItemChange,\n        onDragStop: this.onItemChange,\n        isDraggable: ReactSession.get(\"admin\") !== undefined ? true : false,\n        isResizable: ReactSession.get(\"admin\") !== undefined ? true : false,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 11\n        }\n      }), this.state.items.map(function (el) {\n        return _this2.createElement(el, el.vid !== undefined ? true : false);\n      }))));\n    }\n  }]);\n\n  return LocalStorageLayout;\n}(React.PureComponent);\n\nLocalStorageLayout.defaultProps = {\n  className: \"layout\",\n  rowHeight: 100,\n  margin: [2, 2],\n  allowOverlap: true,\n  preventCollision: false,\n  resizeHandles: ['e'],\n  compactType: null,\n  autoSize: true\n};\nexport { LocalStorageLayout as default };\n\nfunction findWeekIndex(weekInformation, date) {\n  // Search for a week in a particular month\n  var monthIndex = date.getMonth(); // Get the first day of every week in that month\n\n  var weekRanges = weekInformation.weekRangesArray[monthIndex].times;\n\n  for (var i = 0; i < weekRanges.length; i++) {\n    if (date <= weekRanges[i].date) {\n      return weekRanges[i].index;\n    }\n  } // Return the index of the last week of the month\n\n\n  return weekRanges[weekRanges.length - 1].index;\n}\n\nfunction findWeekDate(weekInformation, index) {\n  return weekInformation.indexMap[index];\n}","map":{"version":3,"names":["React","RGL","WidthProvider","_","TimelineGrid","Link","ReactSession","ReactGridLayout","LocalStorageLayout","props","socket","heightLimit","newInstructorArray","weekInformation","totalWeeks","replaceItem","item","i","state","layout","length","newLayout","slice","setState","onLayoutChange","layouts","onItemChange","oldItem","newItem","startDate","findWeekDate","x","endDate","w","index","findIndex","items","element","data","toString","foundItem","yAxisLockedItem","y","instructor","instructorArray","Math","floor","emit","username","key","courseNum","caId","start","getTime","end","onAddVacation","info","findWeekIndex","Date","start_date","end_date","newVacation","text","uid","vid","vacation_id","h","concat","onAddCourse","course","parseInt","weeklength","undefined","instructorKey","number","title","userId","onRemoveUser","initialLength","reject","console","log","reduce","acc","newElement","itemData","isDraggable","isResizable","onAddUser","user","name","firstname","lastname","timeblocks","vacations","arr","map","vacationStart","vacationEnd","vacationId","get","on","JSON","stringify","onRemoveItem","vacation","onRemoveVacation","el","isVacation","removeStyle","position","right","top","cursor","padding","color","dsStyle","left","bottom","bind","pathname","search","width","createElement","PureComponent","defaultProps","className","rowHeight","margin","allowOverlap","preventCollision","resizeHandles","compactType","autoSize","date","monthIndex","getMonth","weekRanges","weekRangesArray","times","indexMap"],"sources":["/media/matt/2-Samsung-Files/Documents/School/BCIT/Level_4/6_ISSP/my-repo/backup (copy)/ISSP-Fall-2022/src/components/NoCollision_Year.jsx"],"sourcesContent":["import React from \"react\";\nimport RGL, { WidthProvider } from \"react-grid-layout\";\nimport _ from \"lodash\";\nimport TimelineGrid from \"./TimelineGrid\";\nimport { Link } from 'react-router-dom';\nimport { ReactSession } from 'react-client-session';\nconst ReactGridLayout = WidthProvider(RGL);\n\n\nexport default class LocalStorageLayout extends React.PureComponent {\n  static defaultProps = {\n    className: \"layout\",\n    rowHeight: 100,\n    margin: [2, 2],\n    allowOverlap: true,\n    preventCollision: false,\n    resizeHandles: ['e'],\n    compactType: null,\n    autoSize: true\n  };\n\n  constructor({ props, socket, heightLimit, newInstructorArray, weekInformation, totalWeeks }) {\n    super(props);\n\n    this.state = {\n      // Loop through the instructor array to get all the courses associated with them\n      items: newInstructorArray.reduce(function (acc, element, index) {\n        if ((element.timeblocks.length === 0 && element.vacations.length === 0) || weekInformation.length === 0) {\n          return acc;\n        }\n\n        // Create a course element for every timeblock and concatenate them into one array\n        let arr = acc.concat(\n          element.timeblocks.map((info) => {\n            const start = findWeekIndex(weekInformation, info.start);\n            const end = findWeekIndex(weekInformation, info.end) + 1;\n            return (\n              {\n                text: info.name,\n                caId: info.caId,\n                userId: info.userId,\n                courseNum: info.courseNum,\n                data: {\n                  i: info.caId,\n                  x: start,\n                  y: index * 2,\n                  w: end - start,\n                  h: 1,\n                }\n              }\n            )\n          })\n        );\n\n        return arr.concat(\n          element.vacations.map((info) => {\n            const start = findWeekIndex(weekInformation, info.vacationStart);\n            const end = findWeekIndex(weekInformation, info.vacationEnd) + 1;\n            return (\n              {\n                text: info.userId + \"'s Vacation\",\n                uid: info.userId,\n                vid: info.vacationId,\n                data: {\n                  i: info.userId + info.vacationId,\n                  x: start,\n                  y: (index * 2) + 1,\n                  w: end - start,\n                  h: 1,\n                }\n              }\n            )\n          })\n        );\n      }, []),\n      heightLimit: heightLimit.get,\n      weekInformation: weekInformation,\n      instructorArray: newInstructorArray\n    };\n    this.socket = socket;\n    this.heightLimit = heightLimit;\n    this.totalWeeks = totalWeeks;\n\n    this.socket.on(\"itemChanged\", (item) => {\n      console.log(\"Item Received: \" + JSON.stringify(item));\n\n      this.replaceItem(item);\n    });\n\n    this.socket.on(\"courseAdded\", (item) => {\n      console.log(\"Item Received: \" + JSON.stringify(item));\n\n      this.onAddCourse(item, parseInt(item.x), parseInt(item.y), false);\n    });\n\n    this.socket.on(\"courseDeleted\", (i) => {\n      console.log(\"Item Received: \" + JSON.stringify(i));\n\n      this.onRemoveItem(i, false);\n    });\n\n    this.socket.on(\"vacationApproved\", (vacation) => {\n      console.log(\"Item Received: \" + JSON.stringify(vacation));\n\n      this.onAddVacation(vacation);\n    });\n\n    this.socket.on(\"vacationDeleted\", (vacation) => {\n      console.log(\"Item Received: \" + JSON.stringify(vacation));\n\n      this.onRemoveVacation(vacation.vacation_id, false);\n    })\n  }\n\n  replaceItem = (item) => {\n    for (let i = 0; i < this.state.layout.length; i++) {\n      if (this.state.layout[i].i === item.i) {\n        const newLayout = this.state.layout.slice();\n        newLayout[i] = item;\n\n        this.setState({\n          layout: newLayout\n        });\n\n        break;\n      }\n    }\n  }\n\n  onLayoutChange = (layout, layouts) => {\n    this.setState({\n      layout: layout\n    });\n  }\n\n  onItemChange = (layout, oldItem, newItem) => {\n    // Update the dates on the postgresql database\n    const startDate = findWeekDate(this.state.weekInformation, newItem.x);\n    const endDate = findWeekDate(this.state.weekInformation, newItem.w + newItem.x - 1);\n\n    // HTTP request instead of sockets\n\n    const index = _.findIndex(this.state.items, (element) => { return element.data.i.toString() === newItem.i });\n    const foundItem = this.state.items[index];\n\n    // Restrict movement of the course to one row only\n    const yAxisLockedItem = newItem;\n    yAxisLockedItem.y = oldItem.y;\n    this.replaceItem(yAxisLockedItem);\n\n    const instructor = this.state.instructorArray[Math.floor(newItem.y / 2)];\n    this.socket.emit('itemChanged', yAxisLockedItem, { username: instructor.key, courseNum: foundItem.courseNum, caId: foundItem.caId, start: startDate.getTime(), end: endDate.getTime() });\n  }\n\n  onAddVacation = (info) => {\n    const start = findWeekIndex(this.state.weekInformation, new Date(info.start_date));\n    const end = findWeekIndex(this.state.weekInformation, new Date(info.end_date)) + 1;\n    const index = _.findIndex(this.state.instructorArray, (element) => { return element.key === info.username });\n\n    const newVacation = {\n      text: info.username + \"'s Vacation\",\n      uid: info.username,\n      vid: info.vacation_id,\n      data: {\n        i: info.username + info.vacation_id,\n        x: start,\n        y: (index * 2) + 1,\n        w: end - start,\n        h: 1,\n      }\n    }\n\n    this.setState({\n      items: this.state.items.concat(\n        newVacation\n      )\n    });\n  }\n\n  onAddCourse = (course, x = 0, y = 0, emit = true) => {\n    const w = parseInt(course.weeklength);\n\n    const startDate = findWeekDate(this.state.weekInformation, x);\n    const endDate = findWeekDate(this.state.weekInformation, w + x - 1);\n    const instructor = this.state.instructorArray[Math.floor(y / 2)];\n\n    // User/ instructor was deleted, can't create a course\n    if (instructor === undefined) {\n      return;\n    }\n\n    if (emit) {\n      this.socket.emit('courseAdded', { ...course, x: x, y: y, instructorKey: instructor.key, courseNum: course.number, start: startDate.getTime(), end: endDate.getTime() });\n    } else {\n      this.setState({\n        // Add a new item\n        items: this.state.items.concat({\n          text: course.title,\n          userId: instructor.key,\n          courseNum: course.number,\n          caId: course.caId,\n          data: {\n            i: course.caId,\n            x: x,\n            y: y,\n            w: w,\n            h: 1,\n          }\n        }),\n      });\n    }\n  }\n\n  onRemoveItem(i, emit = true) {\n    // Find the index of the course element in the state\n    const index = _.findIndex(this.state.items, (element) => { return element.data.i === i });\n    const foundItem = this.state.items[index];\n\n    // Emit a message to all other applications that a course has been edeleted\n    if (emit) {\n      this.socket.emit(\"courseDeleted\", foundItem, i);\n    }\n\n    // Remove the element from the state\n    this.setState({ items: _.reject(this.state.items, (element) => { return element.data.i === i }) });\n  }\n\n  onRemoveVacation(vid, emit = true) {\n    if (emit) {\n      this.socket.emit(\"vacationDeleted\", { vacation_id: vid });\n    }\n\n    // Remove the element from the state\n    this.setState({ items: _.reject(this.state.items, (element) => { return element.vid === vid }) });\n  }\n\n  onRemoveUser = (key, y) => {\n    const initialLength = this.state.instructorArray.length;\n    this.setState({ instructorArray: _.reject(this.state.instructorArray, (element) => { return element.key === key }) },\n      () => {\n        // No user/ instructor found to delete\n        if (this.state.instructorArray.length !== initialLength) {\n          // Remove elements on the same row\n          console.log(\"Removed items at: \" + y);\n          this.setState({ items: _.reject(this.state.items, (element) => { return element.data.y === y || element.data.y === y + 1 }) }\n            , () => {\n              console.log(this.state.items);\n              // Move course elements up if they are below the user that was deleted\n              this.setState({\n                items: _.reduce(this.state.items, (acc, element) => {\n                  if (element.data.y > y) {\n                    const newElement = element;\n                    newElement.data.y -= 2;\n                    return [...acc, newElement];\n                  } else {\n                    return [...acc, element];\n                  }\n                }, [])\n              },\n                () => {\n                  this.setState({\n                    layout: _.reduce(this.state.items, (acc, element) => {\n                      if (element.vid !== undefined) {\n                        const itemData = { ...element.data, isDraggable: false, isResizable: false };\n                        return [...acc, itemData];\n                      } else {\n                        const itemData = element.data;\n                        return [...acc, itemData];\n                      }\n                    }, [])\n                  });\n                  console.log(this.state.layout);\n                });\n            });\n          // Reset layout so that the items are shifted up visually\n        }\n      });\n  }\n\n  onAddUser = (user) => {\n    this.setState({ instructorArray: [...this.state.instructorArray, { key: user.username, name: user.firstname + \" \" + user.lastname, timeblocks: [], vacations: [] }] });\n  }\n\n  createElement(el, isVacation = false) {\n    const removeStyle = {\n      position: \"absolute\",\n      right: \"2px\",\n      top: 0,\n      cursor: \"pointer\",\n      padding: \"5px\",\n      color: \"black\"\n    };\n    const dsStyle = {\n      position: \"absolute\",\n      left: \"2px\",\n      bottom: 0,\n      cursor: \"pointer\",\n      padding: \"5px\",\n      color: \"black\"\n    };\n\n    return (\n      <div key={el.data.i} data-grid={isVacation ? { ...el.data, isDraggable: false, isResizable: false } : el.data} name={el.text + \" el\"} >\n        <span className=\"text\">{el.text}</span>\n        {\n          ReactSession.get(\"admin\") !== undefined ?\n            <span\n              className=\"remove\"\n              style={removeStyle}\n              onClick={isVacation ? this.onRemoveVacation.bind(this, el.vid) : this.onRemoveItem.bind(this, el.data.i)}\n            >\n              x\n            </span>\n            :\n            undefined\n        }\n        {!isVacation && ReactSession.get(\"admin\") !== undefined ?\n          <Link\n            to={{\n              pathname: \"/detailed-schedule\",\n              search: \"?courseNum=\" + el.courseNum,\n            }}\n          >\n            <span\n              className=\"remove\"\n              style={dsStyle}\n            >\n              Detailed\n            </span>\n          </Link>\n          :\n          undefined\n        }\n      </div>\n    );\n  }\n\n  render() {\n    console.log(this.props.weekInformation);\n    console.log(this.state.items);\n    console.log(this.totalWeeks);\n    return (\n      <React.Fragment>\n        <TimelineGrid\n          socket={this.socket}\n          heightLimit={this.heightLimit}\n          instructorArray={this.state.instructorArray}\n          createCourse={this.onAddCourse}\n          totalWeeks={this.totalWeeks}\n          onRemoveUser={this.onRemoveUser}\n          onAddUser={this.onAddUser} />\n        <div className=\"grid-item-container\" style={{ width: this.totalWeeks * 102, position: \"absolute\" }}>\n          <ReactGridLayout\n            {...this.props}\n            cols={this.totalWeeks}\n            maxRows={this.state.heightLimit()}\n            layout={this.state.layout}\n            onLayoutChange={this.onLayoutChange}\n            onResizeStop={this.onItemChange}\n            onDragStop={this.onItemChange}\n            isDraggable={ReactSession.get(\"admin\") !== undefined ? true : false}\n            isResizable={ReactSession.get(\"admin\") !== undefined ? true : false}\n          >\n            {this.state.items.map(el => this.createElement(el, el.vid !== undefined ? true : false))}\n            {/* {this.state.vacations.map(el => this.createElement(el, true))} */}\n          </ReactGridLayout>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nfunction findWeekIndex(weekInformation, date) {\n  // Search for a week in a particular month\n  const monthIndex = date.getMonth();\n\n  // Get the first day of every week in that month\n  const weekRanges = weekInformation.weekRangesArray[monthIndex].times;\n\n  for (let i = 0; i < weekRanges.length; i++) {\n    if (date <= weekRanges[i].date) {\n      return weekRanges[i].index;\n    }\n\n  }\n\n  // Return the index of the last week of the month\n  return weekRanges[weekRanges.length - 1].index;\n}\n\nfunction findWeekDate(weekInformation, index) {\n  return weekInformation.indexMap[index];\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}