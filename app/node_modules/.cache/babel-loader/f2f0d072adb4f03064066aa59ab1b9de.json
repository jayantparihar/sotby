{"ast":null,"code":"import _classCallCheck from \"/media/matt/2-Samsung-Files/Documents/School/BCIT/Level_4/6_ISSP/my-repo/backup (copy)/ISSP-Fall-2022/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/media/matt/2-Samsung-Files/Documents/School/BCIT/Level_4/6_ISSP/my-repo/backup (copy)/ISSP-Fall-2022/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/media/matt/2-Samsung-Files/Documents/School/BCIT/Level_4/6_ISSP/my-repo/backup (copy)/ISSP-Fall-2022/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/media/matt/2-Samsung-Files/Documents/School/BCIT/Level_4/6_ISSP/my-repo/backup (copy)/ISSP-Fall-2022/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/media/matt/2-Samsung-Files/Documents/School/BCIT/Level_4/6_ISSP/my-repo/backup (copy)/ISSP-Fall-2022/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/media/matt/2-Samsung-Files/Documents/School/BCIT/Level_4/6_ISSP/my-repo/backup (copy)/ISSP-Fall-2022/src/Schedule.js\";\nimport React from \"react\";\nimport \"./style.css\";\nimport './gridstyles.css';\nimport \"./timeline.css\";\nimport Timeline from './components/Timeline';\nvar END_POINT_ROOT = \"http://localhost:8000/\";\nvar INSTRUCTORS_RESOURCE = \"users\";\n\nvar App = /*#__PURE__*/function (_React$Component) {\n  _inherits(App, _React$Component);\n\n  function App(_ref) {\n    var _this;\n\n    var socket = _ref.socket;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this));\n    _this.state = {\n      instructors: [],\n      heightLimit: 8,\n      loaded: false,\n      error: \"\"\n    };\n\n    _this.parseData = function (data) {\n      if (!data) {\n        return null;\n      }\n\n      var parsedData = JSON.parse(data);\n      var instructorArray = {};\n\n      for (var i = 0; i < parsedData.length; i++) {\n        var key = parsedData[i].username;\n        var instructor = void 0; // Check if instructor is already in the object\n\n        if (instructorArray[key]) {\n          instructor = instructorArray[key];\n        } else {\n          instructor = {};\n          instructor.timeblocks = [];\n          instructor.vacations = [];\n          instructor.name = parsedData[i].first_name + \" \" + parsedData[i].last_name;\n          instructor.key = key;\n          instructorArray[key] = instructor;\n        } // Check if there are any valid courses associated with the instructor\n\n\n        if (parsedData[i].start_date != null && parsedData[i].end_date != null) {\n          instructor.timeblocks.push({\n            start: new Date(parsedData[i].start_date),\n            end: new Date(parsedData[i].end_date),\n            name: parsedData[i].title,\n            courseNum: parsedData[i].course_num,\n            caId: parsedData[i].ca_id,\n            userId: parsedData[i].username\n          });\n        } // Check if there are any valid vacations associated with the instructor\n\n\n        if (parsedData[i].vacation_start != null && parsedData[i].vacation_end != null && parsedData[i].approved === 1) {\n          instructor.vacations.push({\n            vacationId: parsedData[i].vacation_id,\n            userId: parsedData[i].username,\n            vacationStart: new Date(parsedData[i].vacation_start),\n            vacationEnd: new Date(parsedData[i].vacation_end)\n          });\n        }\n      }\n\n      instructorArray = Object.values(instructorArray);\n      console.log(instructorArray);\n\n      _this.setState({\n        instructors: instructorArray,\n        heightLimit: (instructorArray.length + 1) * 2\n      });\n\n      _this.setState({\n        loaded: true\n      });\n    };\n\n    _this.retrieveInstructorDataFromDatabase = function () {\n      fetch(END_POINT_ROOT + INSTRUCTORS_RESOURCE).then(function (response) {\n        return response.text();\n      }).then(function (data) {\n        _this.parseData(data);\n      });\n    };\n\n    _this.socket = socket;\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"getHeightLimit\",\n    value: function getHeightLimit() {\n      return this.state.heightLimit;\n    }\n  }, {\n    key: \"setHeightLimit\",\n    value: function setHeightLimit(heightLimit) {\n      this.setState({\n        heightLimit: heightLimit\n      });\n      console.log(\"HeightLimit: \" + this.state.heightLimit);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.retrieveInstructorDataFromDatabase();\n    }\n  }, {\n    key: \"removeElement\",\n    value: function removeElement(el) {\n      console.log(el);\n    }\n  }, {\n    key: \"renderApp\",\n    value: function renderApp() {\n      var _this2 = this;\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"App\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 7\n        }\n      }, this.state.error !== \"\" ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \"error-modal\",\n        key: \"errorModal\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }\n      }, \"Error:\"), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 13\n        }\n      }, this.state.error), /*#__PURE__*/React.createElement(\"button\", {\n        style: {\n          position: \"absolute\",\n          top: 0,\n          right: 0\n        },\n        onClick: function onClick() {\n          _this2.setState({\n            error: \"\"\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 15\n        }\n      }, \"X\"))) : undefined, /*#__PURE__*/React.createElement(Timeline, {\n        socket: this.socket,\n        heightLimit: {\n          get: function get() {\n            return _this2.getHeightLimit();\n          },\n          set: function set(limit) {\n            return _this2.setHeightLimit(limit);\n          }\n        },\n        instructorArray: this.state.instructors,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 9\n        }\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      // Remove this later on and add a real feedback message, this is just for development purposes\n      this.socket.on('error', function (err) {\n        console.log(err);\n\n        if (typeof err === String) {\n          _this3.setState({\n            error: err\n          });\n        } else {\n          if (err.detail === undefined) {\n            _this3.setState({\n              error: \"ERROR Code: \" + err.code\n            });\n          } else {\n            _this3.setState({\n              error: err.detail\n            });\n          }\n        }\n      });\n      return this.state.loaded ? this.renderApp() : /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 9\n        }\n      }, \"Loading data...\");\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\nexport { App as default };","map":{"version":3,"names":["React","Timeline","END_POINT_ROOT","INSTRUCTORS_RESOURCE","App","socket","state","instructors","heightLimit","loaded","error","parseData","data","parsedData","JSON","parse","instructorArray","i","length","key","username","instructor","timeblocks","vacations","name","first_name","last_name","start_date","end_date","push","start","Date","end","title","courseNum","course_num","caId","ca_id","userId","vacation_start","vacation_end","approved","vacationId","vacation_id","vacationStart","vacationEnd","Object","values","console","log","setState","retrieveInstructorDataFromDatabase","fetch","then","response","text","el","position","top","right","undefined","get","getHeightLimit","set","limit","setHeightLimit","on","err","String","detail","code","renderApp","Component"],"sources":["/media/matt/2-Samsung-Files/Documents/School/BCIT/Level_4/6_ISSP/my-repo/backup (copy)/ISSP-Fall-2022/src/Schedule.js"],"sourcesContent":["import React from \"react\";\nimport \"./style.css\";\nimport './gridstyles.css';\nimport \"./timeline.css\";\nimport Timeline from './components/Timeline';\n\nconst END_POINT_ROOT = \"http://localhost:8000/\";\nconst INSTRUCTORS_RESOURCE = \"users\";\n\nexport default class App extends React.Component {\n  state = {\n    instructors: [],\n    heightLimit: 8,\n    loaded: false,\n    error: \"\"\n  };\n\n  constructor({ socket }) {\n    super();\n    this.socket = socket;\n  }\n\n  getHeightLimit() {\n    return this.state.heightLimit;\n  }\n\n  setHeightLimit(heightLimit) {\n    this.setState({ heightLimit: heightLimit });\n    console.log(\"HeightLimit: \" + this.state.heightLimit);\n  }\n\n  parseData = (data) => {\n    if (!data) {\n      return null;\n    }\n    const parsedData = JSON.parse(data);\n\n    let instructorArray = {};\n    for (let i = 0; i < parsedData.length; i++) {\n      const key = parsedData[i].username;\n\n      let instructor;\n      // Check if instructor is already in the object\n      if (instructorArray[key]) {\n        instructor = instructorArray[key];\n      } else {\n        instructor = {};\n        instructor.timeblocks = [];\n        instructor.vacations = [];\n        instructor.name = parsedData[i].first_name + \" \" + parsedData[i].last_name;\n        instructor.key = key;\n        instructorArray[key] = instructor;\n      }\n      // Check if there are any valid courses associated with the instructor\n      if (parsedData[i].start_date != null && parsedData[i].end_date != null) {\n        instructor.timeblocks.push({\n          start: new Date(parsedData[i].start_date),\n          end: new Date(parsedData[i].end_date),\n          name: parsedData[i].title,\n          courseNum: parsedData[i].course_num,\n          caId: parsedData[i].ca_id,\n          userId: parsedData[i].username\n        });\n      }\n\n      // Check if there are any valid vacations associated with the instructor\n      if (parsedData[i].vacation_start != null && parsedData[i].vacation_end != null && parsedData[i].approved === 1) {\n        instructor.vacations.push({\n          vacationId: parsedData[i].vacation_id,\n          userId: parsedData[i].username,\n          vacationStart: new Date(parsedData[i].vacation_start),\n          vacationEnd: new Date(parsedData[i].vacation_end),\n        });\n      }\n    }\n    instructorArray = Object.values(instructorArray);\n    console.log(instructorArray);\n\n    this.setState({ instructors: instructorArray, heightLimit: (instructorArray.length + 1) * 2 })\n    this.setState({ loaded: true })\n  }\n\n  retrieveInstructorDataFromDatabase = () => {\n    fetch(END_POINT_ROOT + INSTRUCTORS_RESOURCE)\n      .then(response => {\n        return response.text();\n      })\n      .then(data => {\n        this.parseData(data)\n      });\n  }\n\n  componentDidMount() {\n    this.retrieveInstructorDataFromDatabase();\n  }\n\n  removeElement(el) {\n    console.log(el);\n  }\n\n  renderApp() {\n    return (\n      <div className=\"App\">\n        {(this.state.error !== \"\") ?\n          <div className=\"error-modal\" key={\"errorModal\"}>\n            <h1>Error:</h1>\n            <p>{this.state.error}</p>\n            <button style={{ position: \"absolute\", top: 0, right: 0 }} onClick={() => { this.setState({ error: \"\" }) }}>\n              <p>X</p>\n            </button>\n          </div>\n          :\n          undefined\n        }\n\n        <Timeline socket={this.socket} heightLimit={{ get: () => this.getHeightLimit(), set: (limit) => this.setHeightLimit(limit) }}\n          instructorArray={this.state.instructors} />\n      </div>\n    );\n  }\n\n  render() {\n    // Remove this later on and add a real feedback message, this is just for development purposes\n    this.socket.on('error', (err) => {\n      console.log(err);\n      if (typeof (err) === String) {\n        this.setState({ error: err });\n      } else {\n        if (err.detail === undefined) {\n          this.setState({ error: \"ERROR Code: \" + err.code });\n        } else {\n          this.setState({ error: err.detail });\n        }\n      }\n    });\n\n    return (\n      this.state.loaded ?\n        this.renderApp()\n        :\n        <span>Loading data...</span>\n    );\n  }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}