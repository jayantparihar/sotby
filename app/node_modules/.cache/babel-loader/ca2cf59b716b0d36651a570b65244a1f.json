{"ast":null,"code":"import _classCallCheck from \"/media/matt/2-Samsung-Files/Documents/School/BCIT/Level_4/6_ISSP/my-repo/backup (copy)/ISSP-Fall-2022/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/media/matt/2-Samsung-Files/Documents/School/BCIT/Level_4/6_ISSP/my-repo/backup (copy)/ISSP-Fall-2022/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/media/matt/2-Samsung-Files/Documents/School/BCIT/Level_4/6_ISSP/my-repo/backup (copy)/ISSP-Fall-2022/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/media/matt/2-Samsung-Files/Documents/School/BCIT/Level_4/6_ISSP/my-repo/backup (copy)/ISSP-Fall-2022/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/media/matt/2-Samsung-Files/Documents/School/BCIT/Level_4/6_ISSP/my-repo/backup (copy)/ISSP-Fall-2022/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/media/matt/2-Samsung-Files/Documents/School/BCIT/Level_4/6_ISSP/my-repo/backup (copy)/ISSP-Fall-2022/src/vacation-approval/VacationApproval.js\";\nimport React from \"react\";\nimport NotApprovedList from \"./components/NotApprovedList\";\nimport NoVacations from \"./components/NoVacations\";\nimport { ReactSession } from 'react-client-session';\nimport { createTheme } from \"@mui/material\";\nimport { styled } from \"@mui/system\";\nimport Header from \"./components/Header\"; // REPLACE WHEN HOSTING\n\nvar END_POINT_ROOT = \"http://localhost:8000/\";\nvar VACATION_RESOURCE = \"vacationsNotApproved\";\nvar screenLayout = createTheme({\n  breakpoints: {\n    values: {\n      xxs: 0,\n      xs: 460,\n      lg: 800\n    }\n  }\n});\nvar ApprovalContainer = styled('div')({\n  width: \"100%\",\n  height: \"100%\",\n  display: \"flex\",\n  flexDirection: \"column\",\n  alignItems: \"center\"\n});\n\nfunction isAdmin() {\n  if (ReactSession.get(\"admin\")) {\n    return true;\n  }\n\n  return false;\n}\n\nvar VacationApproval = /*#__PURE__*/function (_React$Component) {\n  _inherits(VacationApproval, _React$Component);\n\n  function VacationApproval(_ref) {\n    var _this;\n\n    var socket = _ref.socket;\n\n    _classCallCheck(this, VacationApproval);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(VacationApproval).call(this));\n    _this.state = {\n      vacations: [],\n      loaded: false\n    };\n\n    _this.approveVacation = function (vacation) {\n      _this.setState({\n        vacations: _this.state.vacations.filter(function (v) {\n          return v.vacation_id !== vacation.vacation_id;\n        })\n      });\n\n      _this.socket.emit(\"vacationApproved\", vacation);\n    };\n\n    _this.rejectVacation = function (vacation) {\n      _this.setState({\n        vacations: _this.state.vacations.filter(function (v) {\n          return v.vacation_id !== vacation.vacation_id;\n        })\n      });\n\n      _this.socket.emit(\"vacationDeleted\", vacation);\n    };\n\n    _this.parseData = function (data) {\n      if (!data) {\n        return null;\n      }\n\n      var parsedData = JSON.parse(data);\n\n      _this.setState({\n        vacations: parsedData\n      });\n\n      _this.setState({\n        loaded: true\n      });\n    };\n\n    _this.getVacations = function () {\n      fetch(END_POINT_ROOT + VACATION_RESOURCE).then(function (response) {\n        return response.text();\n      }).then(function (data) {\n        _this.parseData(data);\n      });\n    };\n\n    _this.socket = socket;\n    socket.on(\"vacationApproved\", function (vacation) {\n      _this.setState({\n        vacations: _this.state.vacations.filter(function (v) {\n          return v.vacation_id !== vacation.vacation_id;\n        })\n      });\n    });\n    socket.on(\"vacationDeleted\", function (vacation) {\n      _this.setState({\n        vacations: _this.state.vacations.filter(function (v) {\n          return v.vacation_id !== vacation.vacation_id;\n        })\n      });\n    });\n    return _this;\n  }\n\n  _createClass(VacationApproval, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getVacations();\n    }\n  }, {\n    key: \"renderApp\",\n    value: function renderApp() {\n      return isAdmin() ? /*#__PURE__*/React.createElement(ApprovalContainer, {\n        theme: screenLayout,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Header, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 17\n        }\n      }), this.state.vacations.length > 0 ? /*#__PURE__*/React.createElement(NotApprovedList, {\n        vacations: this.state.vacations,\n        onApprove: this.approveVacation,\n        onReject: this.rejectVacation,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 22\n        }\n      }) : /*#__PURE__*/React.createElement(NoVacations, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 24\n        }\n      })) : window.location.href = \"/\";\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return this.state.loaded ? this.renderApp() : /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }\n      }, \"Loading data...\");\n    }\n  }]);\n\n  return VacationApproval;\n}(React.Component);\n\nexport { VacationApproval as default };","map":{"version":3,"names":["React","NotApprovedList","NoVacations","ReactSession","createTheme","styled","Header","END_POINT_ROOT","VACATION_RESOURCE","screenLayout","breakpoints","values","xxs","xs","lg","ApprovalContainer","width","height","display","flexDirection","alignItems","isAdmin","get","VacationApproval","socket","state","vacations","loaded","approveVacation","vacation","setState","filter","v","vacation_id","emit","rejectVacation","parseData","data","parsedData","JSON","parse","getVacations","fetch","then","response","text","on","length","window","location","href","renderApp","Component"],"sources":["/media/matt/2-Samsung-Files/Documents/School/BCIT/Level_4/6_ISSP/my-repo/backup (copy)/ISSP-Fall-2022/src/vacation-approval/VacationApproval.js"],"sourcesContent":["import React from \"react\";\nimport NotApprovedList from \"./components/NotApprovedList\"\nimport NoVacations from \"./components/NoVacations\"\nimport { ReactSession } from 'react-client-session';\nimport { createTheme } from \"@mui/material\";\nimport { styled } from \"@mui/system\";\nimport Header from \"./components/Header\";\n\n// REPLACE WHEN HOSTING\nconst END_POINT_ROOT = \"http://localhost:8000/\"\nconst VACATION_RESOURCE = \"vacationsNotApproved\"\n\nconst screenLayout = createTheme({\n    breakpoints: {\n        values: {\n            xxs: 0,\n            xs: 460,\n            lg: 800,\n        }\n    }\n})\n\nconst ApprovalContainer = styled('div')({\n    width: \"100%\",\n    height: \"100%\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n})\n\nfunction isAdmin() {\n    if (ReactSession.get(\"admin\")) {\n        return true;\n    }\n    return false;\n}\n\nexport default class VacationApproval extends React.Component {\n    state = {\n        vacations: [],\n        loaded: false,\n    }\n\n    constructor({ socket }) {\n        super()\n        this.socket = socket\n        socket.on(\"vacationApproved\", (vacation) => {\n            this.setState({ vacations: this.state.vacations.filter((v) => v.vacation_id !== vacation.vacation_id) })\n        })\n        socket.on(\"vacationDeleted\", (vacation) => {\n            this.setState({ vacations: this.state.vacations.filter((v) => v.vacation_id !== vacation.vacation_id) })\n        })\n    }\n\n    approveVacation = (vacation) => {\n        this.setState({ vacations: this.state.vacations.filter((v) => v.vacation_id !== vacation.vacation_id) })\n        this.socket.emit(\"vacationApproved\", vacation)\n    }\n\n    rejectVacation = (vacation) => {\n        this.setState({ vacations: this.state.vacations.filter((v) => v.vacation_id !== vacation.vacation_id) })\n        this.socket.emit(\"vacationDeleted\", vacation)\n    }\n\n    parseData = (data) => {\n        if (!data) {\n            return null;\n        }\n        const parsedData = JSON.parse(data)\n        this.setState({ vacations: parsedData })\n        this.setState({ loaded: true })\n    }\n\n    getVacations = () => {\n        fetch(END_POINT_ROOT + VACATION_RESOURCE)\n            .then(response => {\n                return response.text();\n            })\n            .then(data => {\n                this.parseData(data)\n            });\n    }\n\n    componentDidMount() {\n        this.getVacations();\n    }\n\n    renderApp() {\n        return isAdmin() ? (\n            <ApprovalContainer theme={screenLayout}>\n                <Header />\n                {this.state.vacations.length > 0 ?\n                    (<NotApprovedList vacations={this.state.vacations} onApprove={this.approveVacation} onReject={this.rejectVacation} />)\n                    : (<NoVacations />)}\n            </ApprovalContainer>\n        ) : window.location.href = \"/\"\n    }\n\n    render() {\n        return (this.state.loaded ? this.renderApp() :\n            <span>Loading data...</span>\n        );\n    }\n}"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,eAAP,MAA4B,8BAA5B;AACA,OAAOC,WAAP,MAAwB,0BAAxB;AACA,SAASC,YAAT,QAA6B,sBAA7B;AACA,SAASC,WAAT,QAA4B,eAA5B;AACA,SAASC,MAAT,QAAuB,aAAvB;AACA,OAAOC,MAAP,MAAmB,qBAAnB,C,CAEA;;AACA,IAAMC,cAAc,GAAG,wBAAvB;AACA,IAAMC,iBAAiB,GAAG,sBAA1B;AAEA,IAAMC,YAAY,GAAGL,WAAW,CAAC;EAC7BM,WAAW,EAAE;IACTC,MAAM,EAAE;MACJC,GAAG,EAAE,CADD;MAEJC,EAAE,EAAE,GAFA;MAGJC,EAAE,EAAE;IAHA;EADC;AADgB,CAAD,CAAhC;AAUA,IAAMC,iBAAiB,GAAGV,MAAM,CAAC,KAAD,CAAN,CAAc;EACpCW,KAAK,EAAE,MAD6B;EAEpCC,MAAM,EAAE,MAF4B;EAGpCC,OAAO,EAAE,MAH2B;EAIpCC,aAAa,EAAE,QAJqB;EAKpCC,UAAU,EAAE;AALwB,CAAd,CAA1B;;AAQA,SAASC,OAAT,GAAmB;EACf,IAAIlB,YAAY,CAACmB,GAAb,CAAiB,OAAjB,CAAJ,EAA+B;IAC3B,OAAO,IAAP;EACH;;EACD,OAAO,KAAP;AACH;;IAEoBC,gB;;;EAMjB,gCAAwB;IAAA;;IAAA,IAAVC,MAAU,QAAVA,MAAU;;IAAA;;IACpB;IADoB,MALxBC,KAKwB,GALhB;MACJC,SAAS,EAAE,EADP;MAEJC,MAAM,EAAE;IAFJ,CAKgB;;IAAA,MAWxBC,eAXwB,GAWN,UAACC,QAAD,EAAc;MAC5B,MAAKC,QAAL,CAAc;QAAEJ,SAAS,EAAE,MAAKD,KAAL,CAAWC,SAAX,CAAqBK,MAArB,CAA4B,UAACC,CAAD;UAAA,OAAOA,CAAC,CAACC,WAAF,KAAkBJ,QAAQ,CAACI,WAAlC;QAAA,CAA5B;MAAb,CAAd;;MACA,MAAKT,MAAL,CAAYU,IAAZ,CAAiB,kBAAjB,EAAqCL,QAArC;IACH,CAduB;;IAAA,MAgBxBM,cAhBwB,GAgBP,UAACN,QAAD,EAAc;MAC3B,MAAKC,QAAL,CAAc;QAAEJ,SAAS,EAAE,MAAKD,KAAL,CAAWC,SAAX,CAAqBK,MAArB,CAA4B,UAACC,CAAD;UAAA,OAAOA,CAAC,CAACC,WAAF,KAAkBJ,QAAQ,CAACI,WAAlC;QAAA,CAA5B;MAAb,CAAd;;MACA,MAAKT,MAAL,CAAYU,IAAZ,CAAiB,iBAAjB,EAAoCL,QAApC;IACH,CAnBuB;;IAAA,MAqBxBO,SArBwB,GAqBZ,UAACC,IAAD,EAAU;MAClB,IAAI,CAACA,IAAL,EAAW;QACP,OAAO,IAAP;MACH;;MACD,IAAMC,UAAU,GAAGC,IAAI,CAACC,KAAL,CAAWH,IAAX,CAAnB;;MACA,MAAKP,QAAL,CAAc;QAAEJ,SAAS,EAAEY;MAAb,CAAd;;MACA,MAAKR,QAAL,CAAc;QAAEH,MAAM,EAAE;MAAV,CAAd;IACH,CA5BuB;;IAAA,MA8BxBc,YA9BwB,GA8BT,YAAM;MACjBC,KAAK,CAACnC,cAAc,GAAGC,iBAAlB,CAAL,CACKmC,IADL,CACU,UAAAC,QAAQ,EAAI;QACd,OAAOA,QAAQ,CAACC,IAAT,EAAP;MACH,CAHL,EAIKF,IAJL,CAIU,UAAAN,IAAI,EAAI;QACV,MAAKD,SAAL,CAAeC,IAAf;MACH,CANL;IAOH,CAtCuB;;IAEpB,MAAKb,MAAL,GAAcA,MAAd;IACAA,MAAM,CAACsB,EAAP,CAAU,kBAAV,EAA8B,UAACjB,QAAD,EAAc;MACxC,MAAKC,QAAL,CAAc;QAAEJ,SAAS,EAAE,MAAKD,KAAL,CAAWC,SAAX,CAAqBK,MAArB,CAA4B,UAACC,CAAD;UAAA,OAAOA,CAAC,CAACC,WAAF,KAAkBJ,QAAQ,CAACI,WAAlC;QAAA,CAA5B;MAAb,CAAd;IACH,CAFD;IAGAT,MAAM,CAACsB,EAAP,CAAU,iBAAV,EAA6B,UAACjB,QAAD,EAAc;MACvC,MAAKC,QAAL,CAAc;QAAEJ,SAAS,EAAE,MAAKD,KAAL,CAAWC,SAAX,CAAqBK,MAArB,CAA4B,UAACC,CAAD;UAAA,OAAOA,CAAC,CAACC,WAAF,KAAkBJ,QAAQ,CAACI,WAAlC;QAAA,CAA5B;MAAb,CAAd;IACH,CAFD;IANoB;EASvB;;;;wCA+BmB;MAChB,KAAKQ,YAAL;IACH;;;gCAEW;MACR,OAAOpB,OAAO,kBACV,oBAAC,iBAAD;QAAmB,KAAK,EAAEZ,YAA1B;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,gBACI,oBAAC,MAAD;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,EADJ,EAEK,KAAKgB,KAAL,CAAWC,SAAX,CAAqBqB,MAArB,GAA8B,CAA9B,gBACI,oBAAC,eAAD;QAAiB,SAAS,EAAE,KAAKtB,KAAL,CAAWC,SAAvC;QAAkD,SAAS,EAAE,KAAKE,eAAlE;QAAmF,QAAQ,EAAE,KAAKO,cAAlG;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,EADJ,gBAEM,oBAAC,WAAD;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,EAJX,CADU,GAOVa,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,GAP3B;IAQH;;;6BAEQ;MACL,OAAQ,KAAKzB,KAAL,CAAWE,MAAX,GAAoB,KAAKwB,SAAL,EAApB,gBACJ;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,qBADJ;IAGH;;;;EAjEyCnD,KAAK,CAACoD,S;;SAA/B7B,gB"},"metadata":{},"sourceType":"module"}